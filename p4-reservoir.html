<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Programmes 4 et 5 â€“ RÃ©servoir et tempÃ©rature</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
  
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.4; margin: 0; padding: 0 1rem 2rem; }
    header { background:#006699; color:white; padding:1rem; margin:0 -1rem 1rem; }
    h1, h2, h3 { margin-top:1rem; }
    code { background:#f4f4f4; padding:0 0.15rem; }
    table { border-collapse: collapse; width:100%; margin:0.8rem 0; }
    th, td { border:1px solid #ccc; padding:0.5rem; vertical-align:top; }
    th { background:#f0f0f0; }
    .box { border:1px solid #ccc; padding:0.8rem; margin:0.8rem 0; border-radius:4px; }
    .exemple { background:#f9f9ff; }
    nav a { margin-right:0.8rem; }
  </style>
</head>
<body>

<header>
  <h1>Programmes 4 et 5 â€“ RÃ©servoir et tempÃ©rature</h1>
  <p>SÃ©quence COLIBRI â€“ Boucles Tant que...Faire et RÃ©pÃ©ter...Jusqu'Ã </p>
</header>

<nav class="navigation-cours">
  <a href="index.html">ğŸ  Accueil</a>
  <a href="p1-voyant.html">1ï¸âƒ£ Voyant</a>
  <a href="p2-chaudiere.html">2ï¸âƒ£-3ï¸âƒ£ ChaudiÃ¨re</a>
  <a href="p4-reservoir.html" class="active">4ï¸âƒ£-5ï¸âƒ£ RÃ©servoir</a>
  <a href="test-analogique.html">ğŸ”¢ Analogique</a>
  <a href="pour-aller-plus-loin.html">â­ Plus loin</a>

  <!-- Boutons ressources -->
  <a href="ressources/algorigramme.html" class="btn-ressource">ğŸ“š Algorigramme</a>
  <a href="ressources/arduino.html" class="btn-ressource">âš¡ Arduino</a>
</nav>


<!-- PROGRAMME 4 -->

<section id="p4-situation">
  <h2>Programme 4 â€“ RÃ©servoir d'eau</h2>

  <div class="box">
    <h3>Cahier des charges</h3>
    <p>
      On souhaite que le rÃ©servoir d'eau soit rempli jusqu'Ã  son niveau haut.
      RÃ©aliser un programme qui active la pompe de remplissage tant que le rÃ©servoir d'eau n'est pas plein.
    </p>
    <ul>
      <li>Capteur de niveau rÃ©servoir &rarr; bouton Grove sur D2 (capteurreservoir).</li>
      <li>Pompe de remplissage &rarr; LED rouge sur D3 (remplir).</li>
    </ul>
  </div>

  <p>
    Ressources : <a href="algorigramme.html#structures">Boucle Tant que...Faire</a> â€“
    <a href="arduino-memo.html#memo">Boucle while en Arduino</a>
  </p>
</section>

<section id="p4-algo">
  <h3>Algorithme P4 â€“ Tant que...Faire</h3>

  <div class="box">
    <h4>Rappel â€“ structure Tant que...Faire</h4>
    <pre><code>Tant que condition vraie Faire
  instruction1
  instruction2
FinTantQue
    </code></pre>
    <p class="exemple">
      Ici : Â« Tant que le rÃ©servoir n'est pas plein, faire fonctionner la pompe de remplissage Â».
    </p>
  </div>

  <h4>Algorithme Ã  complÃ©ter</h4>
  <table>
    <thead>
      <tr>
        <th>Cahier des charges</th>
        <th>Algorithme (pseudo-code)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          Activer la pompe de remplissage tant que le rÃ©servoir d'eau n'est pas plein.
        </td>
        <td>
          Variables : capteurreservoir, remplir<br><br>
          Tant que (le rÃ©servoir n'est pas plein) Faire<br>
          &nbsp;&nbsp;mettre remplir &larr; 1 (pompe ON)<br>
          FinTantQue<br>
          mettre remplir &larr; 0 (pompe OFF)
        </td>
      </tr>
    </tbody>
  </table>

  <div class="box">
    <h4>Algorigramme P4</h4>
    <p>
      Dessiner l'algorigramme correspondant :
      <ul>
        <li>DÃ©but</li>
        <li>Tant que Â« rÃ©servoir non plein ? Â»</li>
        <li>&nbsp;&nbsp;Instruction Â« pompe ON Â»</li>
        <li>FinTantQue</li>
        <li>Instruction Â« pompe OFF Â»</li>
        <li>Fin</li>
      </ul>
    </p>
  </div>
</section>

<section id="p4-code">
  <h3>Code Arduino P4 â€“ while</h3>

  <div class="box">
    <h4>Correspondance algorithme â†” Arduino</h4>
    <ul>
      <li>capteurreservoir &rarr; broche D2 en <strong>INPUT</strong>.</li>
      <li>remplir &rarr; broche D3 en <strong>OUTPUT</strong>.</li>
      <li>Condition Â« rÃ©servoir non plein Â» &rarr; test sur <code>digitalRead(capteurreservoir)</code> (Ã  dÃ©finir selon le cÃ¢blage).</li>
      <li>Boucle Tant que &rarr; <code>while (condition) { ... }</code> en Arduino.</li>
    </ul>
  </div>

  <h4>Squelette de code</h4>
  <p>ComplÃ©ter en choisissant la condition de la boucle.</p>

<pre><code>int capteurreservoir = 2;  // bouton niveau rÃ©servoir sur D2
int remplir          = 3;  // LED rouge sur D3 (pompe)

void setup() {
  pinMode(capteurreservoir, INPUT);
  pinMode(remplir, OUTPUT);
}

void loop() {
  // A faire  : tant que le rÃ©servoir n'est pas plein, activer la pompe
  // while (          ) {
  //   digitalWrite(remplir, HIGH);
  // }

  // ensuite, arrÃªter la pompe
  // digitalWrite(remplir, LOW);
}
</code></pre>

  <details>
    <summary>Coup de pouce P4</summary>
    <p>
      Utiliser une condition du type <code>while (digitalRead(capteurreservoir) == LOW)</code>
      si le bouton passe Ã  HIGH quand le niveau haut est atteint.
    </p>
  </details>

  <details>
    <summary>Correction possible P4 (exemple)</summary>
<pre><code>void loop() {
  while (digitalRead(capteurreservoir) == LOW) { // tant que rÃ©servoir non plein
    digitalWrite(remplir, HIGH);                // pompe ON
  }
  digitalWrite(remplir, LOW);                   // rÃ©servoir plein : pompe OFF
}
</code></pre>
  </details>
</section>

<!-- PROGRAMME 5 -->

<section id="p5-situation">
  <h2>Programme 5 â€“ TempÃ©rature de l'eau</h2>

  <div class="box">
    <h3>Cahier des charges</h3>
    <p>
      On souhaite que la tempÃ©rature de l'eau reste constante.
      Si la tempÃ©rature basse est atteinte, chauffer l'eau tant que la tempÃ©rature haute n'est pas atteinte.
      Penser Ã  arrÃªter le chauffage Ã  la fin.
    </p>
    <ul>
      <li>TempÃ©rature basse &rarr; bouton Grove sur D2 (temp_bas).</li>
      <li>TempÃ©rature haute &rarr; bouton Grove sur D4 (temp_haut).</li>
      <li>Chauffage &rarr; LED rouge sur D3 (chauffer).</li>
    </ul>
  </div>

  <p>
    Ressources : <a href="algorigramme.html#structures">RÃ©pÃ©ter...Jusqu'Ã  / do...while</a> â€“
    <a href="arduino-memo.html#memo">Boucle do...while en Arduino</a>
  </p>
</section>

<section id="p5-algo">
  <h3>Algorithme P5 â€“ RÃ©pÃ©ter...Jusqu'Ã </h3>

  <div class="box">
    <h4>Rappel â€“ structure RÃ©pÃ©ter...Jusqu'Ã </h4>
    <pre><code>RÃ©pÃ©ter
  instruction1
  instruction2
Jusqu'Ã  condition vraie
    </code></pre>
    <p class="exemple">
      Ici : Â« RÃ©pÃ©ter chauffer l'eau jusqu'Ã  ce que la tempÃ©rature haute soit atteinte Â».
    </p>
  </div>

  <h4>Algorithme Ã  complÃ©ter</h4>
  <table>
    <thead>
      <tr>
        <th>Cahier des charges</th>
        <th>Algorithme (pseudo-code)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          Si la tempÃ©rature basse est atteinte, chauffer l'eau tant que la tempÃ©rature haute n'est pas atteinte.
          ArrÃªter le chauffage Ã  la fin.
        </td>
        <td>
          Variables : temp_bas, temp_haut, chauffer<br><br>
          Si (temp_bas atteint) ALORS<br>
          &nbsp;&nbsp;RÃ©pÃ©ter<br>
          &nbsp;&nbsp;&nbsp;&nbsp;mettre chauffer &larr; 1<br>
          &nbsp;&nbsp;Jusqu'Ã  (temp_haut atteint)<br>
          &nbsp;&nbsp;mettre chauffer &larr; 0<br>
          FinSi
        </td>
      </tr>
    </tbody>
  </table>

  <div class="box">
    <h4>Algorigramme P5</h4>
    <p>
      Dessiner lâ€™algorigramme :
      <ul>
        <li>Test initial : Â« temp_bas atteinte ? Â»</li>
        <li>Si OUI, boucle de chauffage jusquâ€™Ã  Â« temp_haut atteinte ? Â»</li>
        <li>Ã€ la fin, instruction Â« chauffer OFF Â»</li>
      </ul>
    </p>
  </div>
</section>

<section id="p5-code">
  <h3>Code Arduino P5 â€“ do...while</h3>

  <div class="box">
    <h4>Correspondance algorithme â†” Arduino</h4>
    <ul>
      <li>temp_bas &rarr; D2 en INPUT, temp_haut &rarr; D4 en INPUT.</li>
      <li>chauffer &rarr; D3 en OUTPUT.</li>
      <li>Structure RÃ©pÃ©ter...Jusqu'Ã  &rarr; <code>do { ... } while (condition);</code>.</li>
    </ul>
  </div>

  <h4>Squelette de code</h4>

<pre><code>int temp_bas  = 2;  // bouton tempÃ©rature basse sur D2
int temp_haut = 4;  // bouton tempÃ©rature haute sur D4
int chauffer  = 3;  // LED rouge sur D3 (chauffage)

void setup() {
  pinMode(temp_bas, INPUT);
  pinMode(temp_haut, INPUT);
  pinMode(chauffer, OUTPUT);
}

void loop() {
  // Si la tempÃ©rature basse est atteinte
  if ( /* A faire  : test temp_bas */ ) {
    // A faire  : chauffer jusqu'Ã  atteindre la tempÃ©rature haute
    // do {
    //   digitalWrite(chauffer, HIGH);
    // } while ( /* A faire  : condition tempÃ©rature haute non atteinte */ );

    // A faire  : arrÃªter le chauffage
    // digitalWrite(chauffer, LOW);
  }
}
</code></pre>

  <details>
    <summary>Coup de pouce P5</summary>
    <p>
      Utiliser <code>digitalRead(temp_bas) == HIGH</code> pour dÃ©tecter la tempÃ©rature basse,
      et <code>digitalRead(temp_haut) == LOW</code> dans la condition du <code>do...while</code>
      si le bouton passe Ã  HIGH quand la tempÃ©rature haute est atteinte.
    </p>
  </details>

  <details>
    <summary>Correction possible P5 (exemple)</summary>
<pre><code>void loop() {
  if (digitalRead(temp_bas) == HIGH) {         // tempÃ©rature basse atteinte
    do {
      digitalWrite(chauffer, HIGH);           // chauffer
    } while (digitalRead(temp_haut) == LOW);   // jusqu'Ã  tempÃ©rature haute

    digitalWrite(chauffer, LOW);              // arrÃªter le chauffage
  }
}
</code></pre>
  </details>

  <p>
    Ressources : 
    <a href="ressources/algorigramme.html#structures">Structures de rÃ©pÃ©tition</a> â€“
    <a href="ressources/arduino-memo.html#memo">while / do...while en Arduino</a>
  </p>
</section>

<nav class="navigation-cours">
  <a href="index.html">â¬… Retour Ã  lâ€™accueil</a>
  <a href="p4-reservoir.html">â¡ Fiche suivante</a>
</nav>

</body>
</html>
